# Documentation utilisateur â€“ Profil Administrateur (Kobbo)

## NB: Consulter le fichier src/main/resources/database/migration/V1__Create_data_base.sql pour comprendre l'analyse

## ğŸ“š Introduction

**Kobbo** est une application SaaS open source permettant la gestion des dÃ©penses et recettes pour les particuliers, 
professionnels indÃ©pendants, et petites entreprises. Cette documentation prÃ©sente le parcours complet 
d'un **utilisateur Administrateur**, de la crÃ©ation de son compte jusqu'Ã  sa dÃ©connexion.

---

## ğŸ”§ ScÃ©nario complet du profil **Administrateur**

### âœ… 1. CrÃ©ation de compte

#### URL : `POST /auth/register`

L'utilisateur fournit :

- `nom`
- `email`
- `mot_de_passe`

Le backend :

- CrÃ©e un utilisateur avec un profil temporaire
- GÃ©nÃ¨re un identifiant UUID
- Retourne une confirmation d'inscription

**âœ‰ï¸ RÃ©ponse attendue :**

```json
{
  "message": "Compte crÃ©Ã© avec succÃ¨s. Connectez-vous pour continuer."
}
```

---

### ğŸ” 2. Connexion

#### URL : `POST /auth/login`

L'utilisateur s'identifie avec :

- `email`
- `mot_de_passe`

Le backend :

- VÃ©rifie les identifiants
- Retourne un **JWT Token** et les informations utilisateur

**âœ‰ï¸ RÃ©ponse attendue :**

```json
{
  "token": "eyJhbGci...",
  "profil": "TEMPORAIRE",
  "societe": null
}
```

---

### ğŸ¢ 3. CrÃ©ation de sociÃ©tÃ© (obligatoire si aucune sociÃ©tÃ© liÃ©e)

#### URL : `POST /societes`

Lorsque `societes_id` de l'utilisateur est `null`, on affiche un formulaire de crÃ©ation d'entreprise.

Champs requis :

- `raison_sociale`
- `email`
- `adresse` (optionnelle)

Le backend :

- CrÃ©e une nouvelle entrÃ©e dans la table `societes`
- Met Ã  jour la table `utilisateurs` :
   - Associe `societes_id`
   - Change `profil_utilisateurs_id` en **ADMIN**

**âœ‰ï¸ RÃ©ponse attendue :**

```json
{
  "message": "SociÃ©tÃ© crÃ©Ã©e avec succÃ¨s. AccÃ¨s au dashboard disponible."
}
```

---

### ğŸ“Š 4. AccÃ¨s au tableau de bord (Dashboard)

#### URL : `GET /dashboard`

Une fois la sociÃ©tÃ© crÃ©Ã©e, l'administrateur accÃ¨de au tableau de bord qui affiche :

- Solde actuel
- Total dÃ©penses / recettes
- RÃ©partition par nature
- Liste des derniÃ¨res opÃ©rations

---

### ğŸ’¼ 5. Gestion des utilisateurs (membres de la sociÃ©tÃ©)

#### URL : `POST /utilisateurs`

Le profil ADMIN peut :

- Inviter des utilisateurs Ã  rejoindre la sociÃ©tÃ©
- Leur attribuer un **profil utilisateur** (LECTEUR, MEMBRE...)

Champs requis :

- `nom`, `email`, `mot_de_passe`, `profil_utilisateur`

---

### ğŸ“… 6. Enregistrement d'une opÃ©ration

#### URL : `POST /operations`

Champs requis :

- `date_operation`
- `intitule`
- `montant`
- `type` (`DEPENSE`, `RECETTE`)
- `natures_id`
- `responsables_id` (crÃ©able via `/responsables`)
- `url_fichier` (facultatif)

---

### ğŸ” 7. Consultation, recherche et filtrage

#### URL : `GET /operations?type=DEPENSE&date_debut=2024-01-01&date_fin=2024-12-31`

L'administrateur peut :

- Filtrer par date, type, nature
- AccÃ©der aux dÃ©tails d'une opÃ©ration

---

### ğŸ›‹ï¸ 8. Ajout de nature ou de responsable

- `POST /natures` pour crÃ©er une nouvelle nature d'opÃ©ration
- `POST /responsables` pour enregistrer un acteur liÃ© Ã  une opÃ©ration (ex : plombier)

---

### âŒ 9. DÃ©connexion

#### Frontend uniquement

- Supprimer le JWT Token du stockage local (localStorage ou cookie)
- Rediriger vers la page de connexion

---

## ğŸ”¹ Endpoints Backend requis (par module)

### ğŸŒ Authentification

- `POST /auth/register` : Inscription
- `POST /auth/login` : Connexion
- `POST /auth/logout` (optionnel si token-side uniquement)

### ğŸ¢ SociÃ©tÃ©s

- `POST /societes` : CrÃ©er une sociÃ©tÃ©
- `GET /societes/{id}` : Voir les dÃ©tails
- `PUT /societes/{id}` : Modifier
- `DELETE /societes/{id}` : Supprimer

### ğŸ‘¤ Utilisateurs

- `POST /utilisateurs` : CrÃ©er/inviter un utilisateur
- `GET /utilisateurs` : Lister les utilisateurs de la sociÃ©tÃ©
- `GET /utilisateurs/{id}` : Voir les dÃ©tails d'un utilisateur
- `PUT /utilisateurs/{id}` : Modifier un utilisateur
- `DELETE /utilisateurs/{id}` : Supprimer

### ğŸ“‹ Profils utilisateurs (rÃ´les)

- `GET /profils` : Lister les rÃ´les disponibles (ADMIN, LECTEUR...)

### ğŸ“ˆ OpÃ©rations

- `POST /operations` : CrÃ©er une opÃ©ration
- `GET /operations` : Liste avec filtres
- `GET /operations/{id}` : DÃ©tail d'une opÃ©ration
- `PUT /operations/{id}` : Modifier
- `DELETE /operations/{id}` : Supprimer

### ğŸ›‹ï¸ Natures d'opÃ©rations

- `POST /natures`
- `GET /natures`
- `PUT /natures/{id}`
- `DELETE /natures/{id}`

### ğŸ‘¨â€ğŸ’¼ Responsables

- `POST /responsables`
- `GET /responsables`
- `PUT /responsables/{id}`
- `DELETE /responsables/{id}`

### âš–ï¸ Statistiques & dashboard

- `GET /dashboard/solde`
- `GET /dashboard/graphique-par-nature`
- `GET /dashboard/repartition-type`

---

## âœ‰ï¸ Conclusion

Ce scÃ©nario assure une prise en main fluide pour un **utilisateur administrateur** de Kobbo. 
Il suit un chemin clair de l'inscription Ã  la gestion quotidienne de ses opÃ©rations, en passant 
par la constitution de son espace de travail (sociÃ©tÃ©, membres, natures, etc.).

La liste des endpoints sert de rÃ©fÃ©rence technique pour le dÃ©veloppeur backend 
et garantit une couverture fonctionnelle exhaustive pour le profil Administrateur.

