# üí∏ Kobbo - Gestion des d√©penses et recettes

Kobbo est un projet **open source** permettant aux **particuliers** et les **petites et moyennes entreprises  (PME)** de
suivre facilement leurs **d√©penses** et **recettes**.

L'objectif principal est de fournir une plateforme simple et efficace pour une meilleure visibilit√© financi√®re.

---

## üß© Fonctionnalit√©s principales

- Cr√©ation et gestion de plusieurs soci√©t√©s
- Gestion des utilisateurs avec r√¥les (profils)
- Enregistrement des op√©rations (d√©penses/recettes)
- Cat√©gorisation des op√©rations par nature (salaire, loyer, etc.)
- Association des op√©rations √† des responsables r√©els
- Filtres puissants par date, type, soci√©t√©, etc.

---

## üß± Mod√®le de donn√©es relationnel

L'application repose sur une base de donn√©es MySQL structur√©e comme suit :

### Tables et relations :

- **`societes`** : entit√©s principales (PME, particuliers)
- **`profil_utilisateurs`** : r√¥les des utilisateurs
- **`utilisateurs`** : personnes utilisant la plateforme
- **`natures`** : types d'op√©rations financi√®res (ex : Salaire)
- **`responsables`** : personnes physiques responsables d'une op√©ration
- **`operations`** : enregistrement des transactions financi√®res

üìä Un diagramme UML est fourni pour visualiser les relations entre les entit√©s :

![Analyse - Kobbo](Diagramme_kobbo.png)

---

## ‚öôÔ∏è Technologies utilis√©es

- **Langage** : SQL / Java / Spring Boot (recommand√©)
- **Base de donn√©es** : MySQL / MariaDB
- **S√©curit√©** : UUID, contraintes d'int√©grit√©, authentification (JWT) bas√©e sur r√¥les
- **Frontend** : Libre choix (Angular, React, etc.)

---

## üöÄ Installation

### üîß Pr√©requis

- Java 17+
- MySQL 8+
- Maven / Gradle
- (Optionnel) Docker & Docker Compose

### üì• √âtapes

1. Clonez le projet :

```bash
git clone https://github.com/votre-utilisateur/kobbo.git
cd kobbo
```

### ü§ù Contribution

Les contributions sont les bienvenues !

Forkez le projet

Cr√©ez une branche (feature/ma-fonctionnalite)

Commitez vos modifications (git commit -am 'Ajout nouvelle fonctionnalit√©')

Pushez (git push origin feature/ma-fonctionnalite)

Ouvrez une Pull Request

### üë®‚Äçüíª Auteur

D√©velopp√© avec ‚ù§Ô∏è par Corneille GBEAGA.
Contact : cgbeaga@gmail.com

---

# üìã Endpoints REST - Kobbo API

---

## üîê Authentification & Autorisation

### Authentification

* **POST** `/api/auth/login` - Connexion utilisateur
* **POST** `/api/auth/logout` - D√©connexion utilisateur
* **POST** `/api/auth/refresh` - Actualiser le token JWT
* **POST** `/api/auth/forgot-password` - Demande de r√©initialisation mot de passe
* **POST** `/api/auth/reset-password` - R√©initialisation mot de passe

### Gestion des utilisateurs

* **GET** `/api/users` - Lister tous les utilisateurs (**Admin**)
* **GET** `/api/users/{id}` - R√©cup√©rer un utilisateur par ID
* **POST** `/api/users` - Cr√©er un nouvel utilisateur
* **PUT** `/api/users/{id}` - Modifier un utilisateur
* **DELETE** `/api/users/{id}` - Supprimer un utilisateur
* **GET** `/api/users/me` - R√©cup√©rer le profil de l'utilisateur connect√©
* **PUT** `/api/users/me` - Modifier le profil de l'utilisateur connect√©
* **PUT** `/api/users/me/password` - Changer le mot de passe

---

## üè¢ Gestion des Soci√©t√©s

### CRUD Soci√©t√©s

* **GET** `/api/societes` - Lister toutes les soci√©t√©s accessibles
* **GET** `/api/societes/{id}` - R√©cup√©rer une soci√©t√© par ID
* **POST** `/api/societes` - Cr√©er une nouvelle soci√©t√©
* **PUT** `/api/societes/{id}` - Modifier une soci√©t√©
* **DELETE** `/api/societes/{id}` - Supprimer une soci√©t√©

### Gestion des utilisateurs dans une soci√©t√©

* **GET** `/api/societes/{id}/users` - Lister les utilisateurs d'une soci√©t√©
* **POST** `/api/societes/{id}/users` - Ajouter un utilisateur √† une soci√©t√©
* **PUT** `/api/societes/{societeId}/users/{userId}` - Modifier le r√¥le d'un utilisateur
* **DELETE** `/api/societes/{societeId}/users/{userId}` - Retirer un utilisateur d'une soci√©t√©

---

## üë• Gestion des Profils Utilisateurs

### CRUD Profils

* **GET** `/api/profils` - Lister tous les profils disponibles
* **GET** `/api/profils/{id}` - R√©cup√©rer un profil par ID
* **POST** `/api/profils` - Cr√©er un nouveau profil (**Admin**)
* **PUT** `/api/profils/{id}` - Modifier un profil (**Admin**)
* **DELETE** `/api/profils/{id}` - Supprimer un profil (**Admin**)

---

## üè∑Ô∏è Gestion des Natures d'Op√©rations

### CRUD Natures

* **GET** `/api/natures` - Lister toutes les natures d'op√©rations
* **GET** `/api/natures/{id}` - R√©cup√©rer une nature par ID
* **POST** `/api/natures` - Cr√©er une nouvelle nature
* **PUT** `/api/natures/{id}` - Modifier une nature
* **DELETE** `/api/natures/{id}` - Supprimer une nature

### Natures par soci√©t√©

* **GET** `/api/societes/{societeId}/natures` - Lister les natures d'une soci√©t√©
* **POST** `/api/societes/{societeId}/natures` - Cr√©er une nature pour une soci√©t√©

---

## üë§ Gestion des Responsables

### CRUD Responsables

* **GET** `/api/responsables` - Lister tous les responsables
* **GET** `/api/responsables/{id}` - R√©cup√©rer un tiers par ID
* **POST** `/api/responsables` - Cr√©er un nouveau tiers
* **PUT** `/api/responsables/{id}` - Modifier un tiers
* **DELETE** `/api/responsables/{id}` - Supprimer un tiers

### Responsables par soci√©t√©

* **GET** `/api/societes/{societeId}/responsables` - Lister les responsables d'une soci√©t√©
* **POST** `/api/societes/{societeId}/responsables` - Cr√©er un tiers pour une soci√©t√©

---

## üí∞ Gestion des Op√©rations (C≈ìur m√©tier)

### CRUD Op√©rations

* **GET** `/api/operations` - Lister toutes les op√©rations (avec filtres)
* **GET** `/api/operations/{id}` - R√©cup√©rer une op√©ration par ID
* **POST** `/api/operations` - Cr√©er une nouvelle op√©ration
* **PUT** `/api/operations/{id}` - Modifier une op√©ration
* **DELETE** `/api/operations/{id}` - Supprimer une op√©ration

### Op√©rations par soci√©t√©

* **GET** `/api/societes/{societeId}/operations` - Lister les op√©rations d'une soci√©t√©
* **POST** `/api/societes/{societeId}/operations` - Cr√©er une op√©ration pour une soci√©t√©

### Filtres et recherches avanc√©es

* **GET** `/api/operations/search` - Recherche avec filtres complexes
    * Param√®tres : `societeId`, `typeOperation`, `dateDebut`, `dateFin`, `responsableId`, `natureId`, `montantMin`,
      `montantMax`
* **GET** `/api/operations/by-periode` - Op√©rations par p√©riode
    * Param√®tres : `societeId`, `debut`, `fin`, `groupBy` (jour/semaine/mois)
* **GET** `/api/operations/by-nature` - Op√©rations group√©es par nature
* **GET** `/api/operations/by-tiers` - Op√©rations group√©es par tiers
* **GET** `/api/operations/by-type` - Op√©rations group√©es par type (d√©pense/recette)

---

## üìä Endpoints de Statistiques et Rapports

### Statistiques g√©n√©rales

* **GET** `/api/stats/dashboard` - Donn√©es du tableau de bord
* **GET** `/api/stats/societe/{id}/resume` - R√©sum√© financier d'une soci√©t√©
* **GET** `/api/stats/societe/{id}/evolution` - √âvolution des finances dans le temps

### Rapports par p√©riode

* **GET** `/api/reports/societe/{id}/mensuel` - Rapport mensuel
* **GET** `/api/reports/societe/{id}/annuel` - Rapport annuel
* **GET** `/api/reports/societe/{id}/custom` - Rapport personnalis√© (dates libres)

### Statistiques par cat√©gorie

* **GET** `/api/stats/societe/{id}/depenses-par-nature` - R√©partition des d√©penses par nature
* **GET** `/api/stats/societe/{id}/recettes-par-nature` - R√©partition des recettes par nature
* **GET** `/api/stats/societe/{id}/balance` - Balance recettes/d√©penses

### Comparaisons et tendances

* **GET** `/api/stats/societe/{id}/comparaison-mensuelle` - Comparaison mois par mois
* **GET** `/api/stats/societe/{id}/tendances` - Analyse des tendances
* **GET** `/api/stats/societe/{id}/previsions` - Pr√©visions bas√©es sur l'historique

---

## üìÅ Gestion des Fichiers et Exports

### Exports

* **GET** `/api/exports/operations/csv` - Export des op√©rations en CSV
* **GET** `/api/exports/operations/excel` - Export des op√©rations en Excel
* **GET** `/api/exports/operations/pdf` - Export des op√©rations en PDF

### Imports

* **POST** `/api/imports/operations/csv` - Import d'op√©rations depuis CSV
* **POST** `/api/imports/operations/excel` - Import d'op√©rations depuis Excel

### Justificatifs

* **POST** `/api/operations/{id}/fichiers` - Ajouter un fichier √† une op√©ration
* **GET** `/api/operations/{id}/fichiers` - Lister les fichiers d'une op√©ration
* **DELETE** `/api/operations/{operationId}/fichiers/{fichierId}` - Supprimer un fichier

---

## üîß Endpoints d'Administration

### Gestion syst√®me

* **GET** `/api/admin/system/health` - √âtat de sant√© du syst√®me
* **GET** `/api/admin/system/metrics` - M√©triques syst√®me
* **GET** `/api/admin/system/logs` - Logs syst√®me (**Admin** uniquement)

### Gestion des donn√©es

* **POST** `/api/admin/backup` - Cr√©er une sauvegarde
* **POST** `/api/admin/restore` - Restaurer une sauvegarde
* **DELETE** `/api/admin/cleanup` - Nettoyer les donn√©es obsol√®tes

### Param√®tres globaux

* **GET** `/api/admin/settings` - R√©cup√©rer les param√®tres globaux
* **PUT** `/api/admin/settings` - Modifier les param√®tres globaux

---

## üéØ Endpoints Utilitaires

### Validation et v√©rification

* **POST** `/api/utils/validate-email` - Valider un email
* **GET** `/api/utils/check-societe-name` - V√©rifier la disponibilit√© d'un nom de soci√©t√©
* **GET** `/api/utils/currencies` - Lister les devises support√©es

### Recherche globale

* **GET** `/api/search` - Recherche globale dans l'application
* **GET** `/api/search/operations` - Recherche sp√©cifique aux op√©rations
* **GET** `/api/search/responsables` - Recherche sp√©cifique aux responsables

### Notifications

* **GET** `/api/notifications` - Lister les notifications de l'utilisateur
* **PUT** `/api/notifications/{id}/read` - Marquer une notification comme lue
* **DELETE** `/api/notifications/{id}` - Supprimer une notification

---

## üìã Param√®tres de requ√™te communs

### Pagination

* `page` : Num√©ro de page (d√©faut : 0)
* `size` : Taille de page (d√©faut : 20)
* `sort` : Crit√®re de tri (ex: `date,desc`)

### Filtres g√©n√©raux

* `search` : Recherche textuelle
* `active` : Filtrer les √©l√©ments actifs/inactifs
* `dateDebut` : Date de d√©but (format ISO)
* `dateFin` : Date de fin (format ISO)

### Formats de r√©ponse

* `format` : Format de r√©ponse (json, csv, excel, pdf)
* `lang` : Langue de la r√©ponse (fr, en)

---

## üîí Niveaux d'autorisation requis

### R√¥les sugg√©r√©s

* **ADMIN** : Acc√®s complet √† toutes les fonctionnalit√©s
* **MANAGER** : Gestion d'une soci√©t√© et de ses utilisateurs
* **COMPTABLE** : Gestion des op√©rations financi√®res
* **UTILISATEUR** : Consultation et saisie limit√©e
* **LECTEUR** : Consultation seule

### Matrice des permissions

* Les endpoints d'administration n√©cessitent le r√¥le **ADMIN**
* Les endpoints de gestion de soci√©t√© n√©cessitent **MANAGER** ou **ADMIN**
* Les endpoints de saisie d'op√©rations n√©cessitent **COMPTABLE** ou sup√©rieur
* Les endpoints de consultation n√©cessitent **UTILISATEUR** ou sup√©rieur

---

## üìù Notes d'impl√©mentation

### S√©curit√©

* Tous les endpoints n√©cessitent une authentification JWT sauf `/api/auth/login`
* Validation des permissions bas√©e sur les r√¥les et l'appartenance aux soci√©t√©s
* Utilisation d'UUID pour tous les identifiants

### Performance

* Impl√©mentation de la pagination sur tous les endpoints de listing
* Cache Redis recommand√© pour les statistiques fr√©quemment consult√©es
* Indexation des champs de recherche en base de donn√©es

### Versioning

* Pr√©fixe `/api/v1` recommand√© pour le versioning
* Headers `Accept` et `Content-Type` obligatoires
* Support du format JSON par d√©faut